{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/Phonebook.js","components/Notification.js","App.js","index.js"],"names":["Filter","filter","changeHandler","value","onChange","PersonForm","newName","newNumber","addName","newNameChangeHandler","newNumberChangeHandler","type","onClick","Persons","personsToShow","deleteHandler","map","p","name","number","id","baseUrl","exports","addEntry","newEntry","axios","post","then","response","data","catch","error","console","log","getAllEntries","get","deleteEntry","delete","updateEntry","person","put","Notification","message","isError","className","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","setMessage","setError","useEffect","phonebookService","allEntries","setNotification","setTimeout","toLowerCase","startsWith","event","target","preventDefault","trim","duplicates","length","window","confirm","updatedPerson","newPerson","concat","find","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5fa53f2e.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({filter, changeHandler}) =>\n    <div>filter shown with <input value={filter} onChange={changeHandler}/></div>\n\nexport default Filter","import React from \"react\";\n\nconst PersonForm = ({newName, newNumber, addName, newNameChangeHandler, newNumberChangeHandler}) =>\n    <form>\n        <div>name: <input value={newName} onChange={newNameChangeHandler}/></div>\n        <div>number: <input value={newNumber} onChange={newNumberChangeHandler}/></div>\n        <div><button type=\"submit\" onClick={addName}>add</button></div>\n    </form>\n\nexport default PersonForm","import React from \"react\";\n\nconst Persons = ({personsToShow, deleteHandler}) =>\n    <div>\n        {personsToShow.map( p =>\n            <div key={p.id}>\n                {p.name} {p.number}>\n                <button onClick={() => deleteHandler(p.id)}>delete</button>\n            </div>\n\n        )}\n    </div>\n\nexport default Persons","import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\"\n\nconst addEntry = newEntry => {\n    return axios.post(baseUrl, newEntry).then( response => response.data )\n        .catch( error => {\n            console.log(\"Failed to add new person\", error)\n            throw error\n        } )\n}\n\nconst updateEntry = (id, person) => {\n    return axios.put(`${baseUrl}/${id}`, person)\n        .then(response => response.data)\n        .catch( error => {\n            console.log(\"Failed to update the person\")\n            throw error\n        } )\n}\n\nconst getAllEntries = () => {\n    return axios.get(baseUrl).then(response => response.data)\n}\n\nconst deleteEntry = (id) => {\n  return axios.delete(`${baseUrl}/${id}`)\n      .then( response => response.data )\n      .catch( error => console.log(\"Failed to delete\") )\n}\n\nconst exports = {addEntry, getAllEntries, deleteEntry, updateEntry}\nexport default exports","import React from \"react\";\n\nconst Notification = ({message, isError = false}) => {\n    if (message === null) return null\n    return <div className={isError ? \"error\" : \"message\"}>{message}</div>\n}\n\nexport default Notification","import React, {useState, useEffect} from 'react'\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport phonebookService from \"./services/Phonebook\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [newName, setNewName] = useState('')\n    const [newNumber, setNewNumber] = useState('')\n    const [filter, setFilter] = useState('')\n    const [message, setMessage] = useState(null)\n    const [error, setError] = useState(null)\n\n    // use effect hook\n    useEffect( () =>{\n        phonebookService.getAllEntries()\n            .then( allEntries => setPersons(allEntries) )\n        }, [])\n\n    // event handlers\n    const addName = (event) => {\n        event.preventDefault()\n        const data = {name: newName.trim(), number: newNumber}\n        const duplicates = persons.filter(p => p.name === newName.trim())\n        if (\n            duplicates.length > 0 &&\n            window.confirm(`${duplicates[0].name} is already added to phonebook, replace the old number with a new one?`)\n        ){\n            phonebookService.updateEntry(duplicates[0].id, data)\n                .then( updatedPerson => {\n                    if (updatedPerson == null){\n                        setNotification(`Information of ${duplicates[0].name} has already been removed from server`, true)\n                        return\n                    }\n                    console.log(\"updating person now..\")\n                    setPersons( persons.map( p => p.id === duplicates[0].id ? updatedPerson : p ) )\n                    setNotification(`Updated number of ${updatedPerson.name}`, false)\n                })\n                .catch( error => setNotification(error.response.data.error, true) )\n\n        }else {\n            phonebookService.addEntry( data )\n                .then( newPerson => {\n                    setPersons( persons.concat(newPerson) )\n                    setNotification(`Added ${newPerson.name}`, false)\n                })\n                .catch( error => setNotification(error.response.data.error, true) )\n        }\n\n        setNewName(\"\")\n        setNewNumber(\"\")\n    }\n\n    const removeName = (id) => {\n        const person = persons.find( p => p.id === id )\n        if ( window.confirm(`Delete ${person.name}?`) )\n            phonebookService.deleteEntry(id)\n                .then( response => {\n                    if (response == null){\n                        setNotification(`Information of ${person.name} has already been removed from server`, true)\n                        return\n                    }\n                    setPersons( persons.filter(p => p.id !== id))\n                    setNotification(`Removed person ${person.name}`, false)\n                })\n    }\n\n    const setNotification = (message, isError) => {\n        // update state for message or error\n        if (isError) setError(message)\n        else setMessage(message)\n        // in 20 seconds, remove the message or error\n        setTimeout( () => isError ? setError(null) : setMessage(null), 5000 )\n    }\n\n    const handleNewNameChange = (event) => setNewName(event.target.value)\n    const handleNewNumberChange = (event) => setNewNumber(event.target.value)\n    const handleFilterChange = (event) => setFilter(event.target.value)\n\n    // processing the state to get useful data for display\n    const personsToShow = persons.filter(p => p.name.toLowerCase().startsWith(filter.toLowerCase()))\n\n    // return\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification message={message} isError={false} />\n            <Notification message={error} isError={true} />\n            <Filter filter={filter} changeHandler={handleFilterChange}/>\n            <h3>Add a new</h3>\n            <PersonForm\n                newName={newName}\n                newNameChangeHandler={handleNewNameChange}\n                newNumber={newNumber}\n                newNumberChangeHandler={handleNewNumberChange}\n                addName={addName}/>\n            <h3>Numbers</h3>\n            <Persons personsToShow={personsToShow} deleteHandler={removeName}/>\n        </div>\n    )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}