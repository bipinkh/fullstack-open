(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t(16),c=t.n(a),o=t(3),u=t(0),i=function(e){var n=e.filter,t=e.changeHandler;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.newName,t=e.newNumber,r=e.addName,a=e.newNameChangeHandler,c=e.newNumberChangeHandler;return Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:a})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:t,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:r,children:"add"})})]})},s=function(e){var n=e.personsToShow,t=e.deleteHandler;return Object(u.jsx)("div",{children:n.map((function(e){return Object(u.jsxs)("div",{children:[e.name," ",e.number,">",Object(u.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.id)}))})},l=t(4),j=t.n(l),b="https://limitless-castle-57379.herokuapp.com/api/persons",f={addEntry:function(e){return j.a.post(b,e).then((function(e){return e.data})).catch((function(e){return console.log("Failed to add new person",e)}))},getAllEntries:function(){return j.a.get(b).then((function(e){return e.data}))},deleteEntry:function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data})).catch((function(e){return console.log("Failed to delete")}))},updateEntry:function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data})).catch((function(e){return console.log("Failed to update the person")}))}},h=function(e){var n=e.message,t=e.isError,r=void 0!==t&&t;return null===n?null:Object(u.jsx)("div",{className:r?"error":"message",children:n})},m=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),l=Object(o.a)(c,2),j=l[0],b=l[1],m=Object(r.useState)(""),O=Object(o.a)(m,2),p=O[0],v=O[1],g=Object(r.useState)(""),w=Object(o.a)(g,2),x=w[0],E=w[1],N=Object(r.useState)(null),y=Object(o.a)(N,2),C=y[0],k=y[1],H=Object(r.useState)(null),S=Object(o.a)(H,2),A=S[0],F=S[1];Object(r.useEffect)((function(){f.getAllEntries().then((function(e){return a(e)}))}),[]);var I=function(e,n){n?F(e):k(e),setTimeout((function(){return n?F(null):k(null)}),5e3)},T=t.filter((function(e){return e.name.toLowerCase().startsWith(x.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(h,{message:C,isError:!1}),Object(u.jsx)(h,{message:A,isError:!0}),Object(u.jsx)(i,{filter:x,changeHandler:function(e){return E(e.target.value)}}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsx)(d,{newName:j,newNameChangeHandler:function(e){return b(e.target.value)},newNumber:p,newNumberChangeHandler:function(e){return v(e.target.value)},addName:function(e){e.preventDefault();var n={name:j.trim(),number:p},r=t.filter((function(e){return e.name===j.trim()}));r.length>0&&window.confirm("".concat(r[0].name," is already added to phonebook, replace the old number with a new one?"))?f.updateEntry(r[0].id,n).then((function(e){null!=e?(console.log("updating person now.."),a(t.map((function(n){return n.id===r[0].id?e:n}))),I("Updated number of ".concat(e.name),!1)):I("Information of ".concat(r[0].name," has already been removed from server"),!0)})):f.addEntry(n).then((function(e){a(t.concat(e)),I("Added ".concat(e.name),!1)})),b(""),v("")}}),Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)(s,{personsToShow:T,deleteHandler:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&f.deleteEntry(e).then((function(r){null!=r?(a(t.filter((function(n){return n.id!==e}))),I("Removed person ".concat(n.name),!1)):I("Information of ".concat(n.name," has already been removed from server"),!0)}))}})]})};t(40);c.a.render(Object(u.jsx)(m,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.17b730b7.chunk.js.map